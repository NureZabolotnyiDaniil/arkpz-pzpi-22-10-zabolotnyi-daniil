Харківський національний університет радіоелектроніки

Кафедра програмної інженерії






Звіт
З Лабораторної роботи № 4.
«Розробка бізнес-логіки та функцій адміністрування серверної частини програмної системи»
з дисципліни «Аналіз та Рефакторинг коду» 






Виконав:                ст. гр. ПЗПІ 22-10  Заболотний Д.М.		Перевірив:
Дашенков Д. С.






Харків 2024
1. Інженерні рішення
У проекті реалізовано розумний ліхтар на базі мікроконтролера з підтримкою WiFi ESP32, який автоматично регулює яскравість освітлення на основі руху та віддалених налаштувань. Система інтегрована з хмарним сервером через REST API, що забезпечує централізоване керування мережею пристроїв.
Ключові компоненти:
•	Мікроконтролер ESP32 – забезпечує обробку даних, керування периферією та зв'язок через WiFi
•	PWM-світлодіод (підключений до GPIO18) – регулює яскравість освітлення з кроком 0-100% (1023 рівнів через ШІМ)
•	PIR-датник (GPIO23) – виявляє рух у радіусі дії
•	Аналоговий датчик напруги (ADC на GPIO35) – моніторить рівень заряду батареї
Мережева взаємодія:
•	Підключення до WiFi із автоматичними повторними спробами. Використовує SSID Wokwi-GUEST
•	REST API для синхронізації налаштувань (GET /iot/{id}/settings) та відправки подій руху (POST /iot/{id}/motion)
•	Ngrok-тунель – забезпечує зовнішній доступ до локального сервера під час тестування
Логіка роботи:
•	Режими яскравості: 
o	Базова (10% за замовчуванням) – активна у стані спокою
o	Підвищена (100%) – активується на active_time секунд після виявлення руху
•	Механізм детекції руху: 
o	При отриманні сигналу від PIR відправляє HTTP-запит на сервер та перемикає світлодіод у режим підвищеної яскравості
o	Після закінчення таймауту повертається до базового рівня
•	Автоматичне оновлення налаштувань – кожні 60 секунд через HTTP-GET

2. Діаграма діяльності
 
Рисунок 2.1 – Діаграма діяльності IoT

3. Діаграма прецедентів
 
Рисунок 3.1 – Діаграма прецедентів IoT

Відео-звіт: https://youtu.be/zFT2dg4B6k0

